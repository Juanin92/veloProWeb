<div class="flex-grow-1 overflow-auto">
    <p *ngIf="dispatchList.length === 0" class="fw-bold fs-5 text-center">No hay despachos</p>
    <ul class="list-group list-group-flush">
        <li 
            class="list-group-item bg-dark-subtle d-flex justify-content-between align-items-center border-bottom border-success">
            <span>Despacho dispatch.trackingNumber - dispatch.status</span>
            <div>
                <button class="btn btn-sm btn-outline-info rounded-pill me-1"><i class="bi bi-truck"></i></button>
                <button class="btn btn-sm btn-outline-success rounded-pill"><i class="bi bi-check-square"></i></button>
                <button class="btn btn-sm btn-outline-danger rounded-pill me-1"><i class="bi bi-x"></i></button>
            </div>
        </li>
    </ul>
</div>
<!-- MODAL DISPATCH -->
<div class="modal fade" id="dispatchModal" tabindex="-1" aria-labelledby="dispatchModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-center w-100">
                <h1 class="modal-title fs-3 w-100">Despacho </h1>
                <button (click)="resetModal()" type="button" class="btn-close" 
                    aria-label="Close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive text-center p-1 pt-0 overflow-auto"
                    style="max-height: calc(100vh - 330px)">
                    <table class="table table-hover mb-0">
                        <thead class="table-info table-bordered sticky-top">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Descripción</th>
                                <th scope="col">Unidad</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Cantidad</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody class="table-group-divider align-middle">
                            <tr *ngFor="let saleDetail of saleDetailList; let i = index">
                                <td scope="row">{{ i + 1 }}</td>
                                <td>{{saleDetail.product.description}}</td>
                                <td>{{saleDetail.product.unit.nameUnit}}</td>
                                <td>{{saleDetail.price | currency : "CLP" : "$" : "1.0-0"}}</td>
                                <td>{{saleDetail.quantity}}</td>
                                <td>{{saleDetail.total | currency : "CLP" : "$" : "1.0-0"}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <form>
                    <div class="form-floating mb-2 mt-1">
                        <input type="text" class="form-control" id="customerModal" placeholder="Ingrese un cliente"
                            name="customer" [(ngModel)]="dispatch.customer"
                            [ngClass]="{'is-invalid':!dispatch.customer, 'is-valid':dispatch.customer}" required />
                        <label for="customerModal" class="form-label">Cliente</label>
                    </div>
                    <div class="form-floating mb-2">
                        <input type="text" class="form-control" id="addressModal" placeholder="Ingrese una dirección"
                            name="address" [(ngModel)]="dispatch.address"
                            [ngClass]="{'is-invalid':!dispatch.address, 'is-valid':dispatch.address}" required />
                        <label for="addressModal" class="form-label">Dirección</label>
                    </div>
                    <div class="form-floating mb-0">
                        <input type="text" class="form-control" id="commnetModal" placeholder="Ingrese un comentario" name="comment"
                            [(ngModel)]="dispatch.comment" [ngClass]="{'is-valid':dispatch.comment}"
                            required />
                        <label for="commentModal" class="form-label">Comentario</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button (click)="createNewDispatch(dispatch)" [disabled]="!dispatch.address && !dispatch.customer" 
                    type="button" class="btn btn-success">Confirmar</button>
                <button (click)="resetModal()" type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>