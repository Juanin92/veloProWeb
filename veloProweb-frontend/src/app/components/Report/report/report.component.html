<div class="container-fluid vh-100 d-flex flex-column p-2">
    <div class="row flex-grow-1">
        <div class="col-12 d-flex flex-column">
            <div class="row mb-1">
                <div class="col-md-4 mb-2">
                    <a class="btn btn-sm btn-primary w-100" [routerLink]="['/compras-reporte']" target="_blank">Ventas</a>
                </div>
                <div class="col-md-4 mb-2">
                    <a class="btn btn-sm btn-primary w-100" [routerLink]="['/ventas-reporte']" target="_blank">Compras</a>
                </div>
                <div class="col-md-4 mb-2">
                    <a class="btn btn-sm btn-primary w-100" [routerLink]="['/registro-producto']" target="_blank">Kardex</a>
                </div>
            </div>
            <div class="row mb-1">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body p-2 pb-0">
                            <h5 class="card-title fs-6">Seleccione los datos a mostrar</h5>
                            <div class="d-flex flex-wrap justify-content-between">
                                <button class="btn btn-outline-info m-1" 
                                    (click)="onButtonClick('totalSale')"
                                    [ngClass]="{'active': activeButton === 'totalSale'}">Total de Ventas</button>
                                <button class="btn btn-outline-info m-1"
                                     (click)="onButtonClick('amountSale')"
                                    [ngClass]="{'active': activeButton === 'amountSale'}">Monto Total de Ventas</button>
                                <button class="btn btn-outline-info m-1"
                                 (click)="onButtonClick('averageSale')"
                                    [ngClass]="{'active': activeButton === 'averageSale'}">Promedio de venta</button>
                                <button class="btn btn-outline-info m-1"
                                 (click)="onButtonClick('totalEarnings')"
                                    [ngClass]="{'active': activeButton === 'totalEarnings'}">Ganancias Totales</button>
                                <button class="btn btn-outline-info m-1"     
                                 (click)="onButtonClick('productSold')"
                                    [ngClass]="{'active': activeButton === 'productSold'}">Productos Vendidos</button>
                                <button class="btn btn-outline-info m-1"
                                 (click)="onButtonClick('categoriesSold')"
                                    [ngClass]="{'active': activeButton === 'categoriesSold'}">Categorías Vendidas</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="buttonClicked" class="row mb-1">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body p-2 pb-0">
                            <h5 class="card-title fs-6">Seleccione un periodo</h5>
                            <div class="d-flex flex-wrap justify-content-between align-items-center">
                                <div class="btn-group mb-2" role="group" aria-label="Periodo de tiempo">
                                    <input type="radio" class="btn-check" name="timePeriod" id="btn30"
                                        value="30" (change)="onPeriodChange('30')" [checked]="selectedPeriod === '30'">
                                    <label class="btn btn-outline-primary" for="btn30">30 días</label>
                                    <input type="radio" class="btn-check" name="timePeriod" id="btn60"
                                        value="60" (change)="onPeriodChange('60')" [checked]="selectedPeriod === '60'">
                                    <label class="btn btn-outline-primary" for="btn60">60 días</label>
                                    <input type="radio" class="btn-check" name="timePeriod" id="btn90"
                                        value="90" (change)="onPeriodChange('90')" [checked]="selectedPeriod === '90'">
                                    <label class="btn btn-outline-primary" for="btn90">90 días</label>
                                    <input type="radio" class="btn-check" name="timePeriod" id="btn6"
                                        value="6" (change)="onPeriodChange('6')" [checked]="selectedPeriod === '6'">
                                    <label class="btn btn-outline-primary" for="btn6">6 meses</label>
                                    <input type="radio" class="btn-check" name="timePeriod" id="btn1"
                                        value="1" (change)="onPeriodChange('1')" [checked]="selectedPeriod === '1'">
                                    <label class="btn btn-outline-primary" for="btn1">1 año</label>
                                </div>
                                <div class="d-flex flex-lg-row flex-column">
                                    <div class="input-group me-2 mb-2">
                                        <span class="input-group-text">Desde</span>
                                        <input type="date" class="form-control" id="startDate" name="startDate"
                                        [(ngModel)]="starDateInput" (change)="selectedPeriod = ''">
                                    </div>
                                    <div class="input-group me-2 mb-2">
                                        <span class="input-group-text">Hasta</span>
                                        <input type="date" class="form-control" id="finalDate" name="finalDate"
                                        [(ngModel)]="endDateInput" (change)="selectedPeriod = ''">
                                    </div>
                                    <button [disabled]="starDateInput === '' && endDateInput === ''" 
                                    class="btn btn-primary mb-2" (click)="callMethod('manual')">Filtrar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row flex-grow-1">
                <div class="col-md-8 mb-3">
                    <div class="card">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Gráfico de Datos</h5>
                            <div class="flex-grow-1" style="min-height: 200px;">
                                <!-- Aquí iría el gráfico -->
                                <p class="text-center text-muted">Gráfico de datos</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-body d-flex flex-column" style="max-height: calc(100vh - 100px);">
                            <h5 class="card-title">Resumen de Datos</h5>
                            <div class="table-responsive flex-grow-1">
                                <table class="table table-sm table-hover">
                                    <thead class="table-info text-center">
                                        <tr>
                                            <th scope="col" class="position-sticky top-0">Fecha</th>
                                            <th scope="col" class="position-sticky top-0">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-group-divider text-center align-middle">
                                        <tr *ngFor="let item of dailySaleCountList">
                                            <th scope="row">{{item.date}}</th>
                                            <td>{{item.sale}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

